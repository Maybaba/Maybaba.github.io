{"version":3,"file":"static/js/852.bcf33fda.chunk.js","mappings":"iKACA,SAAgB,iBAAmB,uDAAuD,WAAa,iDAAiD,QAAU,8CAA8C,UAAY,gDAAgD,QAAU,8CAA8C,iBAAmB,wD,uBCYvV,MAoFA,EApFqCA,IAAqC,IAApC,kBAACC,EAAiB,UAAEC,GAAUF,EAChE,MAAM,WAACG,IAAcC,EAAAA,EAAAA,KAErB,IAAIC,EAAgB,GAEpB,MAqCMC,EA9BmBC,KAErB,MAAMC,EAAM,IAAIC,KAGVC,EAAa,IAAID,KAAKF,GAGtBI,EAAW,KAGXC,EAAmBF,EAAaF,EAEhCK,EAAwBC,KAAKC,MAAOH,EAAmBD,EAAQ,KAcrE,OAZAN,EAAa,GAAAW,OAAMH,EAAqB,uBAExCI,QAAQC,IAAI,6BAAUR,GACtBO,QAAQC,IAAI,6BAAUV,GACtBS,QAAQC,IAAI,6BAAUb,GACtBY,QAAQC,KAAIC,EAAAA,EAAAA,OAAMP,KAEfO,EAAAA,EAAAA,OAAMP,IACLK,QAAQC,IAAI,6DAITN,EAAmBD,KAAaQ,EAAAA,EAAAA,OAAMP,EAAiB,EAG1CQ,CAAgBnB,EAAkBM,YAI1D,OAFAU,QAAQC,IAAI,0CAAaZ,IAGrBe,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,EAAOC,iBAAiBC,SAAA,CACnCnB,GACGe,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,EAAOG,WAAWD,SAAA,EAC9BE,EAAAA,EAAAA,KAAA,KAAAF,SAAG,8DACHJ,EAAAA,EAAAA,MAAA,KAAAI,SAAA,CAAIxB,EAAkB2B,UAAU,uDAIpCP,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,EAAOM,QAAQJ,SAAA,EAC3BJ,EAAAA,EAAAA,MAAA,KAAGC,UAAWC,EAAOlB,cAAcoB,SAAA,CAAC,mEAChCE,EAAAA,EAAAA,KAAA,QAAAF,SACKpB,QAGTgB,EAAAA,EAAAA,MAAA,KAAAI,SAAA,CAAG,oCAECJ,EAAAA,EAAAA,MAAA,QAAAI,SAAA,EACIE,EAAAA,EAAAA,KAAA,QAAML,UAAWC,EAAOO,UAAUL,SAA4B,GAA1BxB,EAAkB8B,SACtDJ,EAAAA,EAAAA,KAAA,QAAAF,SAAM,kBAIdJ,EAAAA,EAAAA,MAAA,KAAGC,UAAWC,EAAOS,QAAQP,SAAA,CAAC,2GACHE,EAAAA,EAAAA,KAAA,SAAK,8EACTA,EAAAA,EAAAA,KAAA,SAAK,wEAKpCA,EAAAA,EAAAA,KAAA,UAAQL,UAAWC,EAAOU,iBAAkBC,QAvEpBC,KAC5BjC,EAAUD,EAAkBmC,eAC5BC,MAAM,kEACNlC,GAAY,EAoEqEsB,SAAC,2CAC7EnB,GAAkBe,EAAAA,EAAAA,MAAA,KAAGC,UAAWC,EAAOS,QAAQP,SAAA,CAAExB,EAAkB8B,MAAM,iEACpEJ,EAAAA,EAAAA,KAAA,KAAGL,UAAWC,EAAOS,QAAQP,SAAC,+HAElC,C","sources":["webpack://foodietree_FE/./src/pages/customer/CancelReservationDetailModal.module.scss?4e0f","pages/customer/CancelReservationDetailModal.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"cancelDetailInfo\":\"CancelReservationDetailModal_cancelDetailInfo__zMpwg\",\"withoutFee\":\"CancelReservationDetailModal_withoutFee__CjPdj\",\"withFee\":\"CancelReservationDetailModal_withFee__NtnL9\",\"cancelFee\":\"CancelReservationDetailModal_cancelFee__tEhgL\",\"feeRule\":\"CancelReservationDetailModal_feeRule__Es9Sk\",\"cancelConfirmBtn\":\"CancelReservationDetailModal_cancelConfirmBtn__I9ZYN\"};","import React from 'react';\nimport {useModal} from \"../common/ModalProvider\";\nimport styles from \"./CancelReservationDetailModal.module.scss\"\nimport {isNaN} from \"lodash\";\n\n/**\n * 소비자 마이페이지 창에서 예약 취소 버튼 누를 시 뜨는 모달\n * @param cancelInfo - storeName, price, cancellationFee\n * @param isCancelAllowed - 픽업 마감시간으로부터 1시간 이내인지 (취소수수료 해당 여부)\n * @param onConfirmCancel - 취소 공지 확인 후 예약 취소\n * @returns {Element}\n * @constructor\n */\nconst CancelReservationDetailModal = ({reservationDetail, onConfirm}) => {\n    const {closeModal} = useModal();\n\n    let remainingTime = '';\n\n    const handleReservationCancel = () => {\n        onConfirm(reservationDetail.reservationId);\n        alert('예약이 취소되었습니다.');\n        closeModal();\n    }\n\n\n    const chargeCancelFee = (pickupTime) => {\n        // 현재 시간을 가져옴\n        const now = new Date();\n\n        // 픽업 시간을 Date 객체로 변환\n        const pickupDate = new Date(pickupTime);\n\n        // 1시간 차이를 밀리초로 변환 (1시간 = 60 * 60 * 1000 ms)\n        const ONE_HOUR = 60 * 60 * 1000;\n\n        // 픽업 시간과 현재 시간의 차이를 밀리초로 계산\n        const timeDifferenceMs = pickupDate - now;\n\n        const timeDifferenceMinutes = Math.floor((timeDifferenceMs % ONE_HOUR) / (60 * 1000));\n\n        remainingTime = `${timeDifferenceMinutes}분 남음`;\n\n        console.log(\"픽업 시간:\", pickupDate);\n        console.log(\"현재 시간:\", now);\n        console.log(\"남은 시간:\", remainingTime);\n        console.log(isNaN(timeDifferenceMs))\n\n        if(isNaN(timeDifferenceMs)){\n            console.log(\"이미 지난 시간입니다.\")\n        }\n\n        // 픽업 시간이 현재 시간으로부터 1시간 이상 남았는지 확인\n        return timeDifferenceMs > ONE_HOUR && !isNaN(timeDifferenceMs);\n    };\n\n    const isCancelAllowed = chargeCancelFee(reservationDetail.pickupTime);\n\n    console.log(\"취소 가능 여부:\", isCancelAllowed);\n\n    return (\n        <div className={styles.cancelDetailInfo}>\n            {isCancelAllowed ? (\n                <div className={styles.withoutFee}>\n                    <p>정말 취소하시겠어요?</p>\n                    <p>{reservationDetail.storeName} 상품이 맞습니까?</p>\n\n                </div>\n            ) : (\n                <div className={styles.withFee}>\n                    <p className={styles.remainingTime}>픽업시간까지 남은 시간:\n                        <span>\n                            {remainingTime}\n                        </span>\n                    </p>\n                    <p>\n                        취소수수료 :\n                        <span>\n                            <span className={styles.cancelFee}>{reservationDetail.price * 0.5}</span>\n                            <span>원</span>\n                        </span>\n\n                    </p>\n                    <p className={styles.feeRule}>\n                        픽업시간 기준 1시간 이내로 예약 취소시 <br/>\n                        취소 수수료 50%가 부과됩니다. <br/>\n                        정말 취소하시겠습니까?\n                    </p>\n                </div>\n            )}\n            <button className={styles.cancelConfirmBtn} onClick={handleReservationCancel}>네, 취소할래요</button>\n            {isCancelAllowed ? <p className={styles.feeRule}>{reservationDetail.price} 원은 자동 환불됩니다.</p>\n                : <p className={styles.feeRule}>취소 수수료는 환불 금액에서 자동 차감됩니다.</p>\n            }\n        </div>\n    );\n};\n\nexport default CancelReservationDetailModal;"],"names":["_ref","reservationDetail","onConfirm","closeModal","useModal","remainingTime","isCancelAllowed","pickupTime","now","Date","pickupDate","ONE_HOUR","timeDifferenceMs","timeDifferenceMinutes","Math","floor","concat","console","log","isNaN","chargeCancelFee","_jsxs","className","styles","cancelDetailInfo","children","withoutFee","_jsx","storeName","withFee","cancelFee","price","feeRule","cancelConfirmBtn","onClick","handleReservationCancel","reservationId","alert"],"sourceRoot":""}